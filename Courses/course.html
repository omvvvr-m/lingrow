<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lingrow | Course</title>

    <link rel="stylesheet" href="../main.css">
    <link rel="stylesheet" href="course.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Lora:ital,wght@0,400..700;1,400..700&family=Oswald:wght@200..700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==
       " crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script>
        fetch('../nav/nav.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
                const script = document.createElement('script');
                script.src = '../nav/nav.js';
                document.body.appendChild(script);
            });
    </script>
</head>



<body>

    <div id="navbar"></div>

    <div class="details-container">
        <h1 id="course-title"></h1>
        <div class="row">
            <div class="leftb">
                <p class="desc" id="course-description">
                </p>
                <p class="playlist"></p>
            </div>
            <div class="rightb">
                <div id="course-video" controls width="600"></div>
            </div>
        </div>
        <div class="row2">
            <div class="details" id="course-details"></div>
            <div id="course-playlist-button"></div>
            <div class="instbox">
                <h2 id="course-instructor-name"></h2>
                <p id="course-instructor-bio">
                </p>
            </div>
        </div>


    </div>

    <script src="data.js"></script>
    <script>
        // Smooth Scroll
        const script = document.createElement('script');
        script.src = '../lenis.min.js';

        script.onload = () => {
            const lenis = new Lenis({
                duration: 1,
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                smooth: true
            })

            function raf(time) {
                lenis.raf(time)
                requestAnimationFrame(raf)
            }
            requestAnimationFrame(raf)
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        e.preventDefault();
                        lenis.scrollTo(targetElement);
                    }
                });
            });
        };
        document.head.appendChild(script);
    </script>

    <!----------------------------- Section Divider ----------------------------->
    <div class="join">

        <div class="bg"> <!-- The background of the page (will be blured) -->
            <div class="box-bg"> <!-- The background of the box (will be white and small) -->
                <div class="img-container">
                    <img src="../imgs/join.png" alt="Join Image">
                </div>
                <div class="join-container">
                    <div class="exit"><i class="fa-solid fa-xmark"></i></div>

                    <p class="join-title">Join Lingrow</p>
                    <form class="joinForm" action="">
                        <div class="horizontal-input-container">
                            <div class="input fname">
                                <label for="firstName">First Name</label>
                                <input type="text" name="firstName" id="firstName" placeholder="Carl" required>
                            </div>
                            <div class="input lname">
                                <label for="lastName">Last Name</label>
                                <input type="text" name="lastName" id="lastName" placeholder="Johnson" required>
                            </div>
                        </div>

                        <div class="horizontal-input-container">

                            <div class="input email">
                                <label for="email">Email Address</label>
                                <input class="email" type="email" name="email" id="email" placeholder="cj@email.com"
                                    required>
                            </div>
                        </div>

                        <div class="horizontal-input-container">
                            <div class="input pass">
                                <label for="password">Password</label>
                                <input type="password" name="password" id="password" placeholder="" required>
                            </div>
                            <div class="input conf">
                                <label for="conf">Confirm Password</label>
                                <input type="password" name="conf" id="conf" required>
                            </div>
                        </div>
                        <div class="horizontal-input-container">
                            <div class="input level">
                                <label for="level">Level</label>
                                <select name="level" id="level" placeholder="C2" required>
                                    <!-- <option value="">Pick English Level</option> -->
                                    <option value="A1">A1</option>
                                    <option value="A2">A2</option>

                                    <option disabled>────────────</option>
                                    <option value="B1">B1</option>
                                    <option value="B2">B2</option>

                                    <option disabled>────────────</option>

                                    <option value="C1">C1</option>
                                    <option value="C2">C2</option>

                                </select>
                            </div>
                            <div class="input phone">
                                <label for="phone">Phone Number</label>
                                <input type="number" name="phone" id="phone" required>
                            </div>
                        </div>
                        <div class="submit-container">
                            <button class="submit" type="submit">Join</button>
                            <p class="alreadymember">Already a member? <a>Sign in.</a></p>
                        </div>
                    </form>

                    <!-- Sign in -->

                    <form class="signinForm" action="">
                        <div class="horizontal-input-container">

                            <div class="input email">
                                <label for="signinEmail">Email Address</label>
                                <input class="email" type="signinEmail" name="signinEmail" id="signinEmail"
                                    placeholder="cj@email.com" required>
                            </div>
                        </div>



                        <div class="horizontal-input-container">
                            <div class="input signinPassword">
                                <label for="signinPassword">Password</label>
                                <input type="password" name="signinPassword" id="signinPassword" placeholder=""
                                    required>
                            </div>
                        </div>
                        <div class="submit-container">
                            <button class="submit" type="submit">Sign in</button>
                            <p class="notamember">Not a member? <a>Join.</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <script>


        document.addEventListener("DOMContentLoaded", function () {
            const joinForm = document.querySelector(".joinForm");
            const signForm = document.querySelector(".signinForm");
            const joinBtn = document.querySelector(".loginbtn");

            console.log(joinForm);

            const alreadyMemberLink = document.querySelector(".alreadymember a");
            console.log(alreadyMemberLink);

            const notMemberLink = document.querySelector(".notamember a");


            const joinWindow = document.querySelector(".join");
            const homeWindow = document.querySelector(".home");

            console.log(joinBtn);



            alreadyMemberLink.addEventListener("click", (e) => {
                e.preventDefault();
                joinForm.style.display = "none";
                signForm.style.display = "flex";
            });


            notMemberLink.addEventListener("click", (e) => {
                e.preventDefault();
                signForm.style.display = "none";
                joinForm.style.display = "flex";
            });

            document.querySelector(".exit").addEventListener("click", function () {
                document.querySelector(".join").style.display = "none";
            });
            function loginUser() {
                sessionStorage.setItem("isLoggedIn", "true");
                alert("Welcome!");
                location.reload();
            }


            function registerUser() {
                const passwordInput = document.getElementById("password");
                const confirmPasswordInput = document.getElementById("conf");

                if (passwordInput.value === confirmPasswordInput.value) {
                    sessionStorage.setItem("isLoggedIn", "true");
                    alert("Registration successful!");
                    // updateJoinButton(); // Update the button
                    location.reload();
                } else {
                    alert("Password does not match.");
                }
            }


            joinForm.addEventListener("submit", function (e) {
                e.preventDefault();
                registerUser();

            });

            signForm.addEventListener("submit", function (e) {
                e.preventDefault();
                loginUser();
            });

            // Function to change Join to Profile
            // function updateJoinButton() {
            //   if (joinBtn) {
            //     joinBtn.textContent = "Profile";
            //     joinBtn.removeEventListener("click", joinDefaultClick); // Avoid duplicate listeners
            //     joinBtn.addEventListener("click", function () {
            //       window.location.href = "profile.html";
            //     });
            //   }
            // }

            function joinDefaultClick() {

            }

            if (sessionStorage.getItem("isLoggedIn") === "true") {
                if (joinBtn) {
                    console.log("Change join button");

                    joinBtn.innerHTML = "Profile";
                    joinBtn.removeEventListener("click", joinDefaultClick); // Avoid duplicate listeners
                    joinBtn.addEventListener("click", function () {
                        window.location.href = "../profile/profile.html";
                    });
                }
            }
        });

    </script>

    <!----------------------------- Section Divider ----------------------------->


    <!-- <script src="../nav/nav.js"></script> -->

</body>

</html>